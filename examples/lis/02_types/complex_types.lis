// LIS Example: Tipos Complexos
// Demonstra: Complex, ByteSil
// Documentação: Seções 1.2, 4.1

fn main() {
    // =========================================
    // ByteSil - Número complexo de 8 bits
    // =========================================
    // ByteSil usa representação log-polar:
    // - 4 bits para rho (magnitude): 0-15 em escala logarítmica
    // - 4 bits para theta (fase): 0-15 mapeando 0° a 337.5°

    print_string("=== ByteSil (8-bit complex) ===");

    // Criação via rho e theta (0-15)
    let bs1: ByteSil = bytesil_new(8, 0);   // rho=8, theta=0 (fase 0°)
    let bs2: ByteSil = bytesil_new(8, 4);   // rho=8, theta=4 (fase 90°)
    let bs3: ByteSil = bytesil_new(8, 8);   // rho=8, theta=8 (fase 180°)
    let bs4: ByteSil = bytesil_new(8, 12);  // rho=8, theta=12 (fase 270°)

    // Obter magnitude e fase
    let mag1 = bytesil_magnitude(bs1);
    let phase1 = bytesil_phase_radians(bs1);

    print_string("ByteSil bs1 (rho=8, theta=0):");
    print_string("  Magnitude:");
    print_float(mag1);
    print_string("  Phase (rad):");
    print_float(phase1);

    let mag2 = bytesil_magnitude(bs2);
    let phase2 = bytesil_phase_radians(bs2);

    print_string("ByteSil bs2 (rho=8, theta=4):");
    print_string("  Magnitude:");
    print_float(mag2);
    print_string("  Phase (rad):");
    print_float(phase2);

    // =========================================
    // ByteSil - Constantes especiais
    // =========================================

    print_string("=== ByteSil Constants ===");

    let zero = bytesil_null();      // Zero (nulo)
    let one = bytesil_one();        // 1 + 0i
    let i_unit = bytesil_i();       // 0 + 1i (unidade imaginária)
    let neg_one = bytesil_neg_one(); // -1 + 0i
    let neg_i = bytesil_neg_i();    // 0 - 1i

    print_string("Magnitude of one:");
    print_float(bytesil_magnitude(one));

    print_string("Magnitude of i:");
    print_float(bytesil_magnitude(i_unit));

    // =========================================
    // Conversão para/de Cartesiano
    // =========================================

    print_string("=== Cartesian Conversion ===");

    // Criar a partir de coordenadas cartesianas (real, imag)
    let from_cart = bytesil_from_complex(1.0, 1.0);  // 1 + 1i

    let cart_mag = bytesil_magnitude(from_cart);
    let cart_phase = bytesil_phase_radians(from_cart);

    print_string("1 + 1i:");
    print_string("  Magnitude (should be ~1.414):");
    print_float(cart_mag);
    print_string("  Phase (should be ~0.785 = pi/4):");
    print_float(cart_phase);
}
