// LIS Example: Funções Trigonométricas
// Demonstra: sin, cos, tan, asin, acos, atan, atan2
// Documentação: Seção 8.2

// =========================================
// Aplicação: Conversão de Coordenadas
// =========================================

// Cartesiano para Polar
fn to_polar(x: Float, y: Float) -> Float {
    // Retorna apenas o ângulo (r seria sqrt(x^2 + y^2))
    return atan2(y, x);
}

// Polar para Cartesiano
fn polar_to_x(r: Float, theta: Float) -> Float {
    return r * cos(theta);
}

fn polar_to_y(r: Float, theta: Float) -> Float {
    return r * sin(theta);
}

fn main() {
    print_string("=== Trigonometric Functions ===");

    // =========================================
    // Constantes Úteis
    // =========================================
    let pi_val = pi();
    print_string("pi() =");
    print_float(pi_val);

    let half_pi = pi_val / 2.0;
    let quarter_pi = pi_val / 4.0;

    // =========================================
    // Seno (sin)
    // =========================================
    print_string("--- sin(x) ---");

    print_string("sin(0) =");
    print_float(sin(0.0));  // 0

    print_string("sin(pi/2) =");
    print_float(sin(half_pi));  // 1

    print_string("sin(pi) =");
    print_float(sin(pi_val));  // ~0

    print_string("sin(3pi/2) =");
    print_float(sin(pi_val * 1.5));  // -1

    // =========================================
    // Cosseno (cos)
    // =========================================
    print_string("--- cos(x) ---");

    print_string("cos(0) =");
    print_float(cos(0.0));  // 1

    print_string("cos(pi/2) =");
    print_float(cos(half_pi));  // ~0

    print_string("cos(pi) =");
    print_float(cos(pi_val));  // -1

    print_string("cos(2pi) =");
    print_float(cos(pi_val * 2.0));  // 1

    // =========================================
    // Tangente (tan)
    // =========================================
    print_string("--- tan(x) ---");

    print_string("tan(0) =");
    print_float(tan(0.0));  // 0

    print_string("tan(pi/4) =");
    print_float(tan(quarter_pi));  // 1

    print_string("tan(pi) =");
    print_float(tan(pi_val));  // ~0

    // =========================================
    // Arco Seno (asin)
    // =========================================
    print_string("--- asin(x) ---");

    print_string("asin(0) =");
    print_float(asin(0.0));  // 0

    print_string("asin(1) =");
    print_float(asin(1.0));  // pi/2

    print_string("asin(-1) =");
    print_float(asin(-1.0));  // -pi/2

    print_string("asin(0.5) =");
    print_float(asin(0.5));  // pi/6 ≈ 0.523

    // =========================================
    // Arco Cosseno (acos)
    // =========================================
    print_string("--- acos(x) ---");

    print_string("acos(1) =");
    print_float(acos(1.0));  // 0

    print_string("acos(0) =");
    print_float(acos(0.0));  // pi/2

    print_string("acos(-1) =");
    print_float(acos(-1.0));  // pi

    print_string("acos(0.5) =");
    print_float(acos(0.5));  // pi/3 ≈ 1.047

    // =========================================
    // Arco Tangente (atan)
    // =========================================
    print_string("--- atan(x) ---");

    print_string("atan(0) =");
    print_float(atan(0.0));  // 0

    print_string("atan(1) =");
    print_float(atan(1.0));  // pi/4 ≈ 0.785

    print_string("atan(-1) =");
    print_float(atan(-1.0));  // -pi/4

    // =========================================
    // Arco Tangente de y/x (atan2)
    // =========================================
    print_string("--- atan2(y, x) ---");

    // atan2 retorna o ângulo em todos os quadrantes
    print_string("atan2(1, 1) = (Q1)");
    print_float(atan2(1.0, 1.0));  // pi/4

    print_string("atan2(1, -1) = (Q2)");
    print_float(atan2(1.0, -1.0));  // 3pi/4

    print_string("atan2(-1, -1) = (Q3)");
    print_float(atan2(-1.0, -1.0));  // -3pi/4

    print_string("atan2(-1, 1) = (Q4)");
    print_float(atan2(-1.0, 1.0));  // -pi/4

    // Casos especiais
    print_string("atan2(0, 1) = (positive x-axis)");
    print_float(atan2(0.0, 1.0));  // 0

    print_string("atan2(1, 0) = (positive y-axis)");
    print_float(atan2(1.0, 0.0));  // pi/2

    // =========================================
    // Identidades Trigonométricas
    // =========================================
    print_string("--- Trigonometric Identities ---");

    let x = 0.5;

    // sin^2(x) + cos^2(x) = 1
    let sin_x = sin(x);
    let cos_x = cos(x);
    let identity = sin_x * sin_x + cos_x * cos_x;
    print_string("sin^2(0.5) + cos^2(0.5) = (should be 1)");
    print_float(identity);

    // tan(x) = sin(x) / cos(x)
    let tan_x = tan(x);
    let tan_computed = sin_x / cos_x;
    print_string("tan(0.5) =");
    print_float(tan_x);
    print_string("sin(0.5)/cos(0.5) =");
    print_float(tan_computed);

    // =========================================
    // Aplicação: Conversão de Coordenadas
    // =========================================
    print_string("--- Coordinate Conversion ---");

    let angle = to_polar(1.0, 1.0);
    print_string("Angle of (1, 1) in radians:");
    print_float(angle);  // pi/4

    let r = 1.0;
    let theta = quarter_pi;
    let cart_x = polar_to_x(r, theta);
    let cart_y = polar_to_y(r, theta);

    print_string("Polar (1, pi/4) to Cartesian:");
    print_string("x =");
    print_float(cart_x);  // ~0.707
    print_string("y =");
    print_float(cart_y);  // ~0.707
}
