// LIS Example: Operações de I/O
// Demonstra: print_int, print_float, print_string, read_line, read_int
// Documentação: Seção 8.6

// =========================================
// Formatação Manual
// =========================================

// Simular printf com múltiplos prints
fn print_result(label: String, value: Int) {
    print_string(label);
    print_int(value);
}

fn print_float_result(label: String, value: Float) {
    print_string(label);
    print_float(value);
}

// =========================================
// Funções de Output Utilitárias
// =========================================

// Imprimir separador
fn print_separator() {
    print_string("------------------------");
}

// Imprimir bool como string
fn print_bool(b: Bool) {
    if b {
        print_string("true");
    } else {
        print_string("false");
    }
}

// Imprimir ByteSil info
fn print_bytesil(label: String, bs: ByteSil) {
    print_string(label);
    print_string("  magnitude:");
    print_float(bytesil_magnitude(bs));
    print_string("  phase (rad):");
    print_float(bytesil_phase_radians(bs));
}

// Imprimir State summary
fn print_state_summary(label: String, s: State) {
    print_string(label);
    print_string("  active layers:");
    print_int(state_count_active_layers(s));
    print_string("  null layers:");
    print_int(state_count_null_layers(s));
}

// =========================================
// Padrão de Logging
// =========================================

fn log_info(message: String) {
    print_string("[INFO]");
    print_string(message);
}

fn log_error(message: String) {
    print_string("[ERROR]");
    print_string(message);
}

fn log_debug(message: String) {
    print_string("[DEBUG]");
    print_string(message);
}

fn main() {
    print_string("=== I/O Operations ===");

    // =========================================
    // Print String (print_string)
    // =========================================
    print_string("--- print_string ---");

    print_string("Hello, World!");
    print_string("This is a message.");
    print_string("Line 1");
    print_string("Line 2");
    print_string("");  // Empty line

    // =========================================
    // Print Int (print_int)
    // =========================================
    print_string("--- print_int ---");

    print_string("Printing integers:");

    print_int(42);
    print_int(0);
    print_int(-17);
    print_int(1000000);

    // Print com contexto
    print_string("The answer is:");
    print_int(42);

    // Resultado de expressão
    print_string("10 + 20 =");
    print_int(10 + 20);

    // =========================================
    // Print Float (print_float)
    // =========================================
    print_string("--- print_float ---");

    print_string("Printing floats:");

    print_float(3.14159);
    print_float(0.0);
    print_float(-273.15);
    print_float(1.0e6);  // Notação científica

    // Print com contexto
    print_string("Pi is approximately:");
    print_float(pi());

    // Resultado de cálculo
    print_string("sqrt(2) =");
    print_float(sqrt(2.0));

    // =========================================
    // Formatação Manual
    // =========================================
    print_string("--- Manual Formatting ---");

    print_result("Factorial of 5:", 120);
    print_result("Sum 1..10:", 55);

    print_float_result("Circle area (r=5):", 3.14159 * 5.0 * 5.0);

    // =========================================
    // Funções de Output Utilitárias
    // =========================================
    print_string("--- Utility Functions ---");

    print_separator();
    print_string("Section 1");
    print_separator();

    print_string("Is 5 > 3?");
    print_bool(5 > 3);

    print_string("Is 2 > 7?");
    print_bool(2 > 7);

    let bs = bytesil_new(8, 4);
    print_bytesil("ByteSil (8, 4):", bs);

    let state = state_neutral();
    print_state_summary("Neutral state:", state);

    // =========================================
    // Read Line (read_line) - Nota
    // =========================================
    print_string("--- read_line (note) ---");
    print_string("read_line() reads a line from stdin.");
    print_string("Usage: let input = read_line();");
    print_string("(Interactive input not demonstrated here)");

    // =========================================
    // Read Int (read_int) - Nota
    // =========================================
    print_string("--- read_int (note) ---");
    print_string("read_int() reads an integer from stdin.");
    print_string("Usage: let num = read_int();");
    print_string("(Interactive input not demonstrated here)");

    // =========================================
    // Padrão de Logging
    // =========================================
    print_string("--- Logging Pattern ---");

    log_info("Application started");
    log_debug("Processing data...");
    log_info("Processing complete");

    print_string("=== End of I/O Demo ===");
}
